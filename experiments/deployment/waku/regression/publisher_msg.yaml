apiVersion: v1
kind: Pod
metadata:
  name: publisher
  namespace: {{ default "zerotesting" .Values.namespace }}
spec:
  restartPolicy: Never
  dnsConfig:
    searches:
      - zerotesting-service.zerotesting.svc.cluster.local
  containers:
    - name: publisher-container
      image: soutullostatus/publisher:testing
      imagePullPolicy: Always
      command:
        - sh
        - -c
        - |
          python /app/traffic.py \
          --messages={{ .Values.messages }} \
          --msg-size-kbytes={{ .Values.msgSizeKbytes }} \
          --delay-seconds={{ .Values.delaySeconds }} \
          --pubsub-topic="/waku/2/rs/2/" \
          --protocols relay
